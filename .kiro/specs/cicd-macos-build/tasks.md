# 実装計画

- [x] 1. 環境設定とデータベース分離機能の実装
  - 環境判定ロジックの作成
  - データベースファイル名の環境別管理
  - 既存のデータベース接続コードの更新
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 1.1 環境設定モジュールの作成
  - `src-tauri/src/config/environment.rs`ファイルを作成
  - Environment列挙型とget_environment関数を実装
  - get_database_filename関数を実装
  - _要件: 3.1, 3.2_

- [ ]* 1.2 環境に応じたデータベースファイル選択のプロパティテスト
  - **プロパティ4: 環境に応じたデータベースファイル選択**
  - **検証対象: 要件 3.1, 3.2**

- [x] 1.3 データベース接続コードの更新
  - `src-tauri/src/db/connection.rs`を更新
  - 環境設定モジュールを使用してデータベースファイル名を決定
  - get_db_path関数を環境対応に更新
  - _要件: 3.3, 3.4_

- [ ]* 1.4 データベースファイル自動作成のプロパティテスト
  - **プロパティ6: データベースファイル自動作成**
  - **検証対象: 要件 3.4**

- [ ]* 1.5 環境切り替え時のパス自動選択のプロパティテスト
  - **プロパティ5: 環境切り替え時のパス自動選択**
  - **検証対象: 要件 3.3**

- [x] 2. GitHub Actionsワークフローの作成
  - CI/CDパイプラインの基本構造を作成
  - MacOSランナーでのビルド環境セットアップ
  - 依存関係管理とキャッシュ設定
  - _要件: 1.1, 4.1, 4.4_

- [x] 2.1 GitHub Actionsワークフローファイルの作成
  - `.github/workflows/release.yml`ファイルを作成
  - mainブランチプッシュトリガーの設定
  - MacOSランナー環境の設定
  - _要件: 1.1_

- [x] 2.2 Node.js/Deno環境セットアップの実装
  - Denoのインストールと設定
  - 依存関係のキャッシュ設定
  - フロントエンドビルドコマンドの実行
  - _要件: 4.1_

- [x] 2.3 Rust環境セットアップの実装
  - Rustツールチェーンのインストール
  - Cargoの依存関係キャッシュ設定
  - Tauriビルド環境の準備
  - _要件: 4.1_

- [ ]* 2.4 固定依存関係使用のプロパティテスト
  - **プロパティ7: 固定依存関係の使用**
  - **検証対象: 要件 4.1**

- [ ] 3. Tauriアプリケーションビルドプロセスの実装
  - プロダクションビルド設定の最適化
  - dmgファイル生成の設定
  - アプリケーション署名の設定
  - _要件: 1.2, 2.2, 4.2_

- [ ] 3.1 Tauri設定ファイルの更新
  - `src-tauri/tauri.conf.json`のプロダクション設定を最適化
  - バンドル設定とアイコン設定の確認
  - アプリケーション識別子の設定
  - _要件: 1.2_

- [ ] 3.2 ビルドコマンドの実装
  - GitHub Actionsでのフロントエンドビルド
  - Tauriアプリケーションビルド
  - dmgファイル生成プロセス
  - _要件: 1.2, 4.2_

- [ ]* 3.3 ビルド成功時の成果物生成のプロパティテスト
  - **プロパティ1: ビルド成功時の成果物生成**
  - **検証対象: 要件 1.2, 1.4**

- [ ]* 3.4 ビルドの再現性のプロパティテスト
  - **プロパティ8: ビルドの再現性**
  - **検証対象: 要件 4.2**

- [ ] 4. エラーハンドリングとログ機能の実装
  - ビルド失敗時の詳細ログ出力
  - 適切なエラーメッセージの表示
  - 通知機能の実装
  - _要件: 1.3, 4.3_

- [ ] 4.1 ビルドエラーハンドリングの実装
  - GitHub Actionsでのエラーキャッチ
  - 詳細なログ出力の設定
  - ビルド失敗時の通知設定
  - _要件: 1.3, 4.3_

- [ ]* 4.2 ビルド失敗時のログ提供のプロパティテスト
  - **プロパティ9: ビルド失敗時のログ提供**
  - **検証対象: 要件 4.3**

- [ ]* 4.3 新コミット時のビルド状態クリアのプロパティテスト
  - **プロパティ10: 新コミット時のビルド状態クリア**
  - **検証対象: 要件 4.4**

- [ ] 5. チェックポイント - すべてのテストが通ることを確認
  - すべてのテストが通ることを確認し、問題があれば質問する

- [ ] 6. GitHubリリース自動化の実装
  - リリース作成の自動化
  - dmgファイルのアセット添付
  - リリースノートの自動生成
  - _要件: 5.1, 5.2, 5.3_

- [ ] 6.1 GitHubリリース作成の実装
  - バージョンタグの自動生成
  - GitHubリリースの作成
  - dmgファイルのリリースアセット添付
  - _要件: 5.1, 5.2_

- [ ] 6.2 リリースノート自動生成の実装
  - コミットメッセージからのリリースノート生成
  - リリースノートのフォーマット設定
  - _要件: 5.3_

- [ ]* 6.3 自動リリース生成とアセット添付のプロパティテスト
  - **プロパティ11: 自動リリース生成とアセット添付**
  - **検証対象: 要件 5.1, 5.2**

- [ ]* 6.4 リリースノート自動生成のプロパティテスト
  - **プロパティ12: リリースノート自動生成**
  - **検証対象: 要件 5.3**

- [ ] 7. 通知機能の実装
  - リリース完了通知の設定
  - 関係者への通知機能
  - _要件: 5.4_

- [ ] 7.1 リリース完了通知の実装
  - GitHub Actionsでの通知設定
  - 関係者への通知機能
  - _要件: 5.4_

- [ ]* 7.2 リリース完了通知のプロパティテスト
  - **プロパティ13: リリース完了通知**
  - **検証対象: 要件 5.4**

- [ ] 8. アプリケーション初期化機能の実装
  - 初回起動時の初期化処理
  - プロダクション用データベースの初期化
  - アプリケーションデータディレクトリの作成
  - _要件: 2.4_

- [ ] 8.1 初回起動時初期化の実装
  - アプリケーション起動時の初期化チェック
  - プロダクション用データベースの初期化
  - アプリケーションデータディレクトリの作成
  - _要件: 2.4_

- [ ]* 8.2 初回起動時の初期化のプロパティテスト
  - **プロパティ3: 初回起動時の初期化**
  - **検証対象: 要件 2.4**

- [ ] 9. 署名とセキュリティ機能の実装
  - アプリケーション署名の設定
  - 署名済み実行可能ファイルの検証
  - _要件: 2.2_

- [ ] 9.1 アプリケーション署名の設定
  - macOS用のコード署名設定
  - 署名証明書の設定（開発用）
  - _要件: 2.2_

- [ ]* 9.2 署名済み実行可能ファイル提供のプロパティテスト
  - **プロパティ2: 署名済み実行可能ファイルの提供**
  - **検証対象: 要件 2.2**

- [ ] 10. 最終チェックポイント - すべてのテストが通ることを確認
  - すべてのテストが通ることを確認し、問題があれば質問する